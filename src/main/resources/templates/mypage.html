<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="당신을 위한 복지, 여행 ALL THAT TOUR">
    <meta property="og:image" content="http://allthattour.kr/img/bg.jpg">
    <meta property="og:title" content="ALL THAT TOUR" />
    <meta property="og:description" content="당신을 위한 복지, 여행 ALL THAT TOUR " />
    <meta property="og:url" content="http://allthattour.kr" />
    <meta property="og:image" content="http://allthattour.kr/img/bg.jpg">
    <meta property="og:title" content="ALL THAT TOUR" />
    <meta property="og:description" content="당신을 위한 복지, 여행 ALL THAT TOUR " />
    <meta property="og:url" content="http://allthattour.kr" />
    <title>ALL THAT TOUR</title>

    <!-- Favicons-->
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="manifest" href="/img/site.webmanifest">
    <link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <!-- GOOGLE WEB FONT -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- BASE CSS -->
    <link href="css/bootstrap-rtl.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/vendors.css" rel="stylesheet">

    <!-- YOUR CUSTOM CSS -->
    <link href="css/custom.css" rel="stylesheet">

</head>

<body>

    <div id="page" class="theia-exception">

        <header class="header menu_fixed">
            <div id="preloader">
                <div data-loader="circle-side"></div>
            </div><!-- /Page Preload -->
            <div id="logo">
                <a href="/">
                    <img src="img/logo.svg" width="150" height="28" alt="" class="logo_normal">
                    <img src="img/logo_sticky.svg" width="150" height="28" alt="" class="logo_sticky">
                </a>

            </div>

            <a href="#menu" class="btn_mobile">
                <div class="hamburger hamburger--spin" id="hamburger">
                    <div class="hamburger-box">
                        <div class="hamburger-inner"></div>
                    </div>
                </div>
            </a>
            <nav id="menu" class="main-menu">
                <ul th:if="${name == ''}">
                    <li><span><a href="/">홈</a></span></li>
                    <li><span><a href="/help">고객센터</a></span></li>
                    <li><span><a href="/cart">장바구니</a></span></li>
                    <li><span><button class="btn btn-primary" onclick="location.href='/signup';">회원가입</a></span>
                    </li>
                    <li><span><button class="btn btn-primary" onclick="location.href='/login';">로그인</a></span>
                    </li>
                </ul>
                <ul th:if="${name != ''}">
                    <li><span><a href="/">홈</a></span></li>
                    <li><span><a href="/help">고객센터</a></span></li>
                    <li><span><a href="/cart">장바구니</a></span></li>
                    <li><span><a href="/mypage" th:text="${name}"></a></span></li>
                </ul>
            </nav>
        </header>
        <!-- /header -->

        <main>
            <section class="hero_in general">
                <div class="wrapper">
                    <div class="container">
                        <h1 class="fadeInUp"><span></span>마이페이지</h1>
                    </div>
                </div>
            </section>
            <!--/hero_in-->

            <div class="container margin_60_35">
                <div class="align-center" th:text="${name}"></div>
                <div class="align-center" th:text="${email}"></div>
                <div class="row">
                    <div class="col-12 col-sm-12">
                        <div class="card card-primary card-outline card-tabs">
                            <div class="card-header p-0 pt-1 border-bottom-0">
                                <ul class="nav nav-tabs" id="custom-tabs-three-tab" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="custom-tabs-three-home-tab" data-toggle="pill"
                                            href="#custom-tabs-three-home" role="tab"
                                            aria-controls="custom-tabs-three-home" aria-selected="false">예약 정보</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="custom-tabs-three-profile-tab" data-toggle="pill"
                                            href="#custom-tabs-three-profile" role="tab"
                                            aria-controls="custom-tabs-three-profile" aria-selected="false">회원 정보</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-body">
                                <div class="tab-content" id="custom-tabs-three-tabContent">
                                    <div class="tab-pane fade show active" id="custom-tabs-three-home" role="tabpanel"
                                        aria-labelledby="custom-tabs-three-home-tab">
                                        <div class="row">
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="custom-tabs-three-profile" role="tabpanel"
                                        aria-labelledby="custom-tabs-three-profile-tab">
                                        <div class="row">
                                            <label style="width: auto;">Name</label>
                                            <input type="text" class="form-control" style="width: auto;" id="first_name"
                                                th:value="${firstName}"> <input type="text" style="width: auto;"
                                                class="form-control" id="last_name" th:value="${lastName}">
                                            <div style="width: auto;" class="place-right"><button
                                                    class="btn btn-primary btn-sm" id="btn-mod-name">수정하기</button>
                                            </div>
                                        </div>
                                        <div class="row mt-2" th:if="${type} == 'email'">
                                            <label style="width: auto;">Email</label>
                                            <input type="text" style="width: auto;" class="form-control" id="email"
                                                th:value="${email}">
                                            <div style="width: auto;" class="place-right"><button
                                                    class="btn btn-primary btn-sm" id="btn-mod-email">수정하기</button>
                                            </div>
                                        </div>
                                        <div class="row mt-2" th:if="${type} == 'email'">
                                            <label style="width: auto;">Password</label>
                                            <input type="password" style="width: auto;" class="form-control" id="passwd"
                                                value="">
                                            <div style="width: auto;" class="place-right"><button id="btn-mod-pw"
                                                    class="btn btn-primary btn-sm">수정하기</button>
                                            </div>
                                        </div>
                                        <div class="row mt-2">
                                            <label style="width: auto;">Phone</label>
                                            <input type="text" style="width: auto;" class="form-control" id="phone"
                                                th:value="${phone}">
                                            <div style="width: auto;" class="place-right"><button
                                                    class="btn btn-primary btn-sm" id="btn-mod-phone">수정하기</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- /.card -->
                            </div>
                        </div>
                    </div>
                    <!-- /row -->
                </div>
                <!--/container-->
        </main>
        <!--/main-->

        <footer>
            <div class="container margin_60_35">
                <div class="row">
                    <div class="col-lg-6 col-md-12 pe-5">
                        <p><img src="img/logo.svg?v=1" width="150" height="36" alt=""></p>
                        <p>종합여행업 : 제 2022-000004호<br>
                            통신판매업 : 제 2022-서울동대문-0873호<br>
                            종합 여행업 보증보험 : 100-000-202300865898<br><br>
                            서울특별시 동대문구 장한로 119 (주) 올댓메디<br>
                            대표자 : 지윤정
                        </p>
                        <div class="follow_us">
                            <ul>
                                <li>Follow us</li>
                                <li><a href="https://www.instagram.com/all_that_tour/"><i class="ti-instagram"></i></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-12 pe-5">
                        <p>
                        <h5>Contact with Us</h5>
                        <ul class="contacts">
                            <li>고객센터 <a href="tel://0264969214"> 02-6406-0214</a> 9:00~ 18:00</li>
                            <li><a href="mailto:tour@allthatmedi.kr"> tour@allthatmedi.kr</a></li>
                        </ul>
                        <div>
                            업무외시간 긴급연락처: +82-6022-2442<br>
                            <ul style="margin-top: 0;">
                                <li style="list-style: disc; list-style-position: inside;">
                                    문의 시에는 "아고다 예약번호"를 함께 제공해주시면 감사하겠습니다.
                                </li>
                            </ul>
                        </div>
                        </p>
                    </div>
                </div>
                <!--/row-->
                <hr>
                <div class="row">
                    <div class="col-lg-6">
                    </div>
                    <div class="col-lg-6">
                        <ul id="additional_links">
                            <li><a
                                    href="https://northern-actress-1b8.notion.site/14b4c5f047a947b19a5f00ba2723dd2e">개인정보처리방침</a>
                            </li>
                            <li><a
                                    href="https://northern-actress-1b8.notion.site/7faa64191d7c4abb971b169d956ae4fa">이용약관</a>
                            </li>
                            <li><span>© ALL THAT TOUR</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
        <!--/footer-->
    </div>
    <!-- page -->

    <div id="toTop"></div><!-- Back to top button -->

    <!-- COMMON SCRIPTS -->
    <script src="js/common_scripts.js"></script>
    <script src="js/main_rtl.js"></script>
    <script src="phpmailer/validate.js"></script>
    <script>
        $(document).on('click', '.nav-link', function (e) {
            $('.nav-link').removeClass('active');
            $(this).addClass('active');
            $('.tab-pane').removeClass('active show')
            $('#' + $(this).attr('aria-controls')).addClass('active show');
        }).on('click', '#btn-mod-name', function (e) {
            e.preventDefault();
            if ($('#first_name').val() == '') {
                alert('이름을 입력해주세요');
                return;
            }
            if ($('#last_name').val() == '') {
                alert('성을 입력해주세요');
                return;
            }
            var data = JSON.stringify({
                firstName: $('#first_name').val(), lastName: $('#last_name').val()
            });
            $.ajax({
                url: "/api/user/mod-name.do", type: 'POST', data: data,
                contentType: "application/json;charset=UTF-8",
                complete: function (e, xhr, settings) {
                    if (e.status == 200) {
                        location.reload();
                    } else {
                    }
                }
            });
        }).on('click', '#btn-mod-email', function (e) {
            e.preventDefault();
            if ($('#email').val() == '') {
                alert('이메일을 입력해주세요');
                return;
            }
            var data = JSON.stringify({
                email: $('#email').val()
            });
            console.log(data)
            $.ajax({
                url: "/api/user/mod-email.do", type: 'POST', data: data,
                contentType: "application/json;charset=UTF-8",
                complete: function (e, xhr, settings) {
                    if (e.status == 200) {
                        location.reload();
                    } else {
                        alert('이미 사용 중인 이메일입니다.');
                    }
                }
            });
        }).on('click', '#btn-mod-pw', function (e) {
            e.preventDefault();
            if ($('#passwd').val() == '') {
                alert('비밀번호를 입력해주세요')
                return;
            }
            var data = JSON.stringify({
                passwd: $('#passwd').val()
            });
            $.ajax({
                url: "/api/user/mod-pw.do", type: 'POST', data: data,
                contentType: "application/json;charset=UTF-8",
                complete: function (e, xhr, settings) {
                    if (e.status == 200) {
                        location.reload();
                    } else {
                    }
                }
            });
        }).on('click', '#btn-mod-phone', function (e) {
            e.preventDefault();
            if ($('#phone').val() == '') {
                alert('핸드폰 번호를 입력해주세요')
                return;
            }
            var data = JSON.stringify({
                phone: $('#phone').val()
            });
            console.log(data)
            $.ajax({
                url: "/api/user/mod-phone.do", type: 'POST', data: data,
                contentType: "application/json;charset=UTF-8",
                complete: function (e, xhr, settings) {
                    if (e.status == 200) {
                        location.reload();
                    } else {
                    }
                }
            });
        })
    </script>


</body>

</html>